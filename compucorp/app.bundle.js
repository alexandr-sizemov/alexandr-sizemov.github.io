webpackJsonp([0],{0:function(e,t,o){o(1),e.exports=o(298)},298:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=o(299),a=n(i),s=o(301),l=n(s),r=o(302),u=n(r),c=o(357),d=n(c),f=o(364),p=n(f);o(368),a["default"].module("app",[l["default"],u["default"],d["default"]]).config(["$locationProvider",function(e){"ngInject";e.html5Mode(!0).hashPrefix("!")}]).component("app",p["default"])},302:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(299),a=n(i),s=o(303),l=n(s),r=o(354),u=n(r),c=o(328),d=n(c),f=a["default"].module("app.common",[u["default"],l["default"],d["default"]]).name;t["default"]=f},303:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(299),a=n(i),s=o(301),l=n(s),r=o(304),u=n(r),c=a["default"].module("map",[l["default"],"weather"]).component("map",u["default"]).name;t["default"]=c},304:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(305),a=n(i),s=o(306),l=n(s);o(350);var r={restrict:"E",bindings:{},template:a["default"],controller:["$scope","WeatherService","locationNotifyService",l["default"]],scope:{getLocation:"="}};t["default"]=r},305:function(e,t){e.exports='<section class="map grey darken-3">\n  <div id="map"></div>\n</section>\n'},306:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(307),a=n(i),s=o(308),l=n(s),r=o(327),u=n(r),c=o(328),d=function(){function e(t,o,n){(0,a["default"])(this,e),this.name="Map",this._scope=t,this._weather=o,this._locationNotifyService=n,this.getUserGeolocation=this.getUserGeolocation.bind(this),this._locationNotifyService.subscribe(t,c.eventsList.locationChange,this.getLocation.bind(this)),this.initialize()}return(0,l["default"])(e,[{key:"initialize",value:function(){var e=this;this.map=new google.maps.Map(document.getElementById("map"),u["default"]),this.geocoder=new google.maps.Geocoder,this.getUserGeolocation(),google.maps.event.addListener(this.map,"idle",function(){e._weather.getWeatherData(e.map)})}},{key:"getUserGeolocation",value:function(){var e=this.map,t=(this._scope,this._locationNotifyService);navigator&&navigator.geolocation.getCurrentPosition(function(t){var o=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);e.setCenter(o)},function(){t.notify(c.eventsList.toggleFormVisibility,!0)})}},{key:"getLocation",value:function(e,t){var o=this.map,n=this._locationNotifyService;this.geocoder.geocode({address:t.country+" "+t.postcode},function(e,t){if("OK"===t){o.setCenter(e[0].geometry.location);new google.maps.Marker({map:o,position:e[0].geometry.location})}else n.notify(c.eventsList.toggleFormVisibility,{isVisible:!0,info:"Geocode was not successful for the following reason: "+t})})}}]),e}();t["default"]=d},327:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={center:{lat:43,lng:7},zoom:8}},328:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.eventsList=void 0;var i=o(329),a=n(i),s=o(349),l=n(s),r=t.eventsList={locationChange:"location-change",toggleFormVisibility:"toggle-form-vibility",geocodeResult:"geocode-result"};t["default"]=angular.module("locationForm",[]).component("locationForm",{template:l["default"],bindings:{country:"&",postcode:"&"},controllerAs:"locationFormController",controller:["$scope","locationNotifyService",function(e,t){var o=function(t,o){e.isVisible=o,e.$apply()},n=function(t,o){e.isResultVisible=o.isVisible,e.resultInfo=o.info,e.$apply()};t.subscribe(e,r.toggleFormVisibility,o),t.subscribe(e,r.geocodeResult,n),e.isVisible=!1,e.isResultVisible=!1,e.resultInfo="",e.getLocation=function(){var o={country:e.country||"",postcode:e.postcode||""};t.notify(r.locationChange,o)}}]}).factory("locationNotifyService",["$rootScope",function(e){return{subscribe:function(t,o,n){var i=e.$on(o,n);t.$on("$destroy",i)},notify:function(t,o){(0,a["default"])(r).some(function(e){return e==t})&&e.$emit(t,o)}}}]).name},349:function(e,t){e.exports='<div class="container" ng-show="isVisible">\n    <div class="row">\n      <div class="col s12">\n        <h1>Insert postcode or country</h1>\n      </div>\n    </div>\n    <div class="row">\n        <div class="col m5">\n      <div class="input-field">\n          <input id="country" ng-model="country" type="text" class="validate">\n          <label for="country">country</label>\n        </div>\n      </div>\n        <div class="col m5">\n      <div class="input-field">\n          <input id="postcode" ng-model="postcode" type="text" class="validate">\n          <label for="postcode">postcode</label>\n        </div>\n      </div>\n      <div class="col m2">\n        <div class="input-field">\n          <a class="waves-effect waves-light btn" ng-click="getLocation()">DISCOVER WEATHER</a>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col s2" ng-show="isResultVisible">\n        <p>{{resultInfo}}</p>\n      </div>\n    </div>\n</div>\n'},350:function(e,t,o){var n=o(351);"string"==typeof n&&(n=[[e.id,n,""]]);o(353)(n,{});n.locals&&(e.exports=n.locals)},351:function(e,t,o){t=e.exports=o(352)(),t.push([e.id,"@import url(http://fonts.googleapis.com/css?family=Roboto);",""]),t.push([e.id,"body{height:100%;width:100%;font:62.5% Roboto,sans-serif}.map{background-color:#263238;height:100vh}.map #map{height:100%;width:100%}.map *{color:#f5f5f5}",""])},354:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(299),a=n(i),s=o(355),l=n(s),r=a["default"].module("weather",[]).service("WeatherService",["$http",l["default"]]).name;t["default"]=r},355:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(307),a=n(i),s=o(308),l=n(s),r=o(356),u=n(r),c=function(){function e(t){(0,a["default"])(this,e),this.$http=t,this.stationList=[],this.api=u["default"].api,this.token=u["default"].token}return(0,l["default"])(e,[{key:"getWeatherData",value:function(e){var t=this,o=this.api,n=this.token,i=e.getBounds(),a=e.getZoom(),s=i.getNorthEast(),l=i.getSouthWest(),r=s.lng(),u=s.lat(),c=l.lng(),d=l.lat();o+="?bbox="+r+","+u+","+c+","+d+","+a+"&cluster=yes&appid="+n,this.$http.get(o).then(function(o){t.clearWeather(),o.data.list.forEach(function(o){var n=t.getMarker(e,o.coord.lat,o.coord.lon,o.weather[0].icon);t.stationList.push(n)})})}},{key:"getMarker",value:function(e,t,o,n){return new google.maps.Marker({position:new google.maps.LatLng(t,o),map:e,icon:u["default"].iconUrl+(n+".png")})}},{key:"clearWeather",value:function(){this.stationList.forEach(function(e){return e.setMap(null)})}}]),e}();t["default"]=c},356:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={api:"http://api.openweathermap.org/data/2.5/box/city",token:"47da3950edf0fcef40421e3233676404",iconUrl:"http://openweathermap.org/img/w/"}},357:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(299),a=n(i),s=o(358),l=n(s),r=a["default"].module("app.components",[l["default"]]).name;t["default"]=r},358:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(299),a=n(i),s=o(301),l=n(s),r=o(359),u=n(r),c=a["default"].module("home",[l["default"]]).config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";t.otherwise("/"),e.state("home",{url:"/",component:"home"})}]).component("home",u["default"]).name;t["default"]=c},359:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(360),a=n(i),s=o(361),l=n(s);o(362);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"]};t["default"]=r},360:function(e,t){e.exports='<main id="container">\n  <location-form/></location-form>  \n  <map></map>\n</main>\n\n'},361:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(307),a=n(i),s=function l(){(0,a["default"])(this,l),this.name="home"};t["default"]=s},362:function(e,t,o){var n=o(363);"string"==typeof n&&(n=[[e.id,n,""]]);o(353)(n,{});n.locals&&(e.exports=n.locals)},363:function(e,t,o){t=e.exports=o(352)(),t.push([e.id,".home{color:red}",""])},364:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(365),a=n(i);o(366);var s={template:a["default"],restrict:"E"};t["default"]=s},365:function(e,t){e.exports='<!-- Place all UI elements intended to be present across all routes in this file -->\n<div class="app">\n  <div ui-view></div>\n</div>\n'},366:function(e,t,o){var n=o(367);"string"==typeof n&&(n=[[e.id,n,""]]);o(353)(n,{});n.locals&&(e.exports=n.locals)},367:function(e,t,o){t=e.exports=o(352)(),t.push([e.id,".app{height:100%;background-color:$lightBgColor}",""])}});
//# sourceMappingURL=app.bundle.js.map